(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[73489],{72875:(e,n,t)=>{t.r(n),t.d(n,{default:()=>I});var o=t(667294),i=t(40142),r=t(85672),s=t(185062),a=t(738697),l=t(155656),d=t(739),c=t(52586),u=t(953867),p=t(878742),g=t(180307),h=t(641483),m=t(938265),b=t(40687),x=t(174523),f=t(304966),_=t(383616),y=t(158961),S=t(739812),w=t(855168),k=t(377556),v=t(352824),T=t(848101),j=t(785893);const C=a.Z+u.Z+k.ki;const M=({children:e})=>{const n=function(){const{path:e}=(0,w.$B)();switch(e){case"/pin/:id":return"pin";case"/:username/:slug/:section_slug":case"/:username/:slug":return"board";case"/:username":return"profile";case"/ideas":return"ideasRoot";case"/ideas/:interest/:id":return"ideasHub";case"/pw/:username":return"resetPasswordUsername";case"/today":return"todayTab";case"/email_verification_error":return"emailVerificationError";case"/email/remove":return"emailRemove";case"/email/subscription":return"emailSubscription";case"/today/:term/:title/:articleId":return"todayArticleFeed";case"/csrf_error":return"csrfError";case"/password/reset":return"passwordReset";default:return"unknown"}}(),{country:t,isSeoBot:o}=(0,i.useSelector)((({session:e})=>e)),s=(0,r.Z)(t,o),{dispatchSignupModalAction:a,handleSignupModalHide:l,pinImageClickHandler:d,pinLinkClickHandler:c,setDimissibleByTier:u,setShowHybridBannerModal:g,showSignupModal:h,signupModalState:m}=(0,_.Z)({hybridTier:s,pageType:n});return(0,j.jsxs)(y.t,{value:{showSignupModal:h,pinImageClickHandler:d,pinLinkClickHandler:c},children:[(0,j.jsx)(b.Z,{showDesktopSignupModal:h,children:e}),(0,j.jsx)(p.Z,{dispatchSignupModalAction:a,handleSignupModalHide:l,hybridTier:s,inviter:void 0,pageType:n,setDimissibleByTier:u,setShowHybridBannerModal:g,showSignupModal:h,signupModalState:m})]})},Z=()=>{var e;const n=(()=>{const[e,n]=(0,o.useState)(!1);return{visible:e,setVisible:n}})(),t=(0,f.Z)(),r=(0,S.vE)(),a=(0,x.ZP)(),{browser:l,country:d,facebookToken:u,isGoogleOneTapInitialized:p,locale:m,origin:b,referrer:_,unauthId:y,userAgentPlatform:w}=(0,i.useSelector)((({session:e})=>e)),k=(0,i.useSelector)((({session:e})=>e.loggedOutUserInfo));return{facebookAccessTokenRefreshIsEnabled:()=>!1,getDeviceAppTypeString:()=>`desktop.${d}.${w}.${l||"unknown"}`.replace(/ /g,"_"),getLoginContext:()=>({referrer:_,facebookToken:u,unauthId:y,origin:b,appType:5}),googleOneTapInitialized:p,loginForMore:n,register:e=>(0,v.Z)(e,{logContextEventType:e=>{t({event_type:e})},sendActiveUserPing:c.Z,registerUserContext:{facebookToken:u,inviteCode:r,locale:m,referrer:_,unauthId:y},onCorsHandshakeHost:g.Z.settings.CORS_HANDSHAKE_DOMAINS.includes(b),successWithoutTokenErrorMessage:a._("We were able to create your account, but there was a problem logging you in. Try refreshing the page to continue."),trackRegisterSuccess:()=>{(0,h.ZP)(`signup_referrer_module.${String((0,s.Z)().referrer||"unknown")}`)}}),viewer:{type:"UNAUTH",info:k&&k.email&&k.first_name?{connectedToFacebook:!!k.connected_to_facebook,connectedToGoogle:!!k.connected_to_google,email:k.email,firstName:k.first_name,hasPassword:!!k.has_password,imageUrl:null!==(e=k.medium_image_url)&&void 0!==e?e:null}:null}}};function I({children:e}){const n=Z();return(0,j.jsxs)(T.I7,{value:n,children:[(0,j.jsx)(l.Z,{unsafeCSS:C}),(0,j.jsx)(d.Z,{}),(0,j.jsx)(m.Z,{children:(0,j.jsx)(M,{children:e})})]})}},493616:(e,n,t)=>{t.d(n,{Z:()=>r});var o=t(667294),i=t(785893);function r({alt:e,className:n,errorFallback:t,onLoad:r,src:s,srcSet:a,style:l}){const[d,c]=(0,o.useState)(!1);return d?(0,i.jsx)("span",{children:t&&t()}):(0,i.jsx)("img",{alt:e,className:n,onError:()=>c(!0),onLoad:r,src:s,style:l,srcSet:a})}},739:(e,n,t)=>{t.d(n,{Z:()=>p});var o=t(632262),i=t(799881),r=t(180307),s=t(641483),a=t(174523),l=t(765197),d=t(670830),c=t(883119),u=t(785893);function p({containerAs:e}){const n=(0,a.ZP)(),t=(0,d.lO)(),p=(null==t?void 0:t.pageType)||"";return(0,u.jsx)(c.xu,{as:null!=e?e:"div",children:(0,u.jsx)(o.Z,{className:"noButtonStyles",onClick:()=>{(0,s.ZP)(`unauth.privacyButtonClicked.${p}`),(0,i.Z)(r.Z.settings.POLICY_PRIVACY_URL,!0)},children:(0,u.jsx)(c.xu,{color:"white",position:"fixed",rounding:1,zIndex:new c.Ry(99999),dangerouslySetInlineStyle:{__style:{boxShadow:"0 2px 0 0 rgba(0, 0, 0, 0.1), 0 0 0 0.5px rgba(0, 0, 0, 0.04)",color:"#333",fontFamily:l.q,fontSize:"12px",fontWeight:"normal",padding:"2px 5px 3px",left:"10px",bottom:"10px"}},children:n._("Privacy","unauth.privacy_text.button","Button to take users to the privacy policy of the site")})})})}},966427:(e,n,t)=>{t.d(n,{o:()=>o,u:()=>i});const o=Object.freeze({OTHER:0,CHROME:1,SAFARI:2,IE:3,FIREFOX:4,OPERA:5,EDGE:6}),i=e=>{switch(!0){case e.includes("Chrome"):return o.CHROME;case e.includes("Safari"):return o.SAFARI;case e.includes("Firefox"):return o.FIREFOX;case e.includes("Opera"):return o.OPERA;case e.includes("IE"):return o.IE;case e.includes("Edge"):return o.EDGE;default:return o.OTHER}}},544004:(e,n,t)=>{t.d(n,{l:()=>r,Z:()=>s});var o=t(174523),i=t(785893);const r="\n.AlternativesSeparatorContinuous:before, .AlternativesSeparatorContinuous:after {\n  background: rgba(0,0,0,0.2);\n  -webkit-box-shadow: 0 1px 0 rgba(255,255,255,0.5);\n  box-shadow: 0 1px 0 rgba(255,255,255,0.5);\n  content: '';\n  display: inline-block;\n  height: 1px;\n  position: relative;\n  vertical-align: middle;\n  width: 37%;\n}\n";function s({css:e={},signupSeparatorContinuous:n=!1,text:t}){const r=(0,o.ZP)();return(0,i.jsx)("p",{className:n?"AlternativesSeparatorContinuous":"",style:{marginBottom:"16px",marginTop:"16px",overflow:"hidden",textAlign:"center",fontSize:"14px",color:"#333",fontWeight:"bold",...e},children:t||r._("OR")})}},632262:(e,n,t)=>{t.d(n,{m:()=>r,Z:()=>u});var o=t(667294),i=t(785893);const r="\n.red.active:focus,\n.red.active:hover {\n  background-color: #d50c22 !important;\n}\n.lightGrey.active:focus,\n.lightGrey.active:hover {\n  background-color: #f5f3f3 !important;\n}\n.darkGrey.active:focus,\n.darkGrey.active:hover {\n  background-color: #5e5e5e !important;\n}\n.blueTransparent.active:focus,\n.blueTransparent.active:hover {\n  background-color: #0077e6 !important;\n}\n.white.active:focus,\n.white.active:hover {\n  background-color: #e6e6e6 !important;\n}\n\n.SignupButton:focus {\n  box-shadow: 0 0 0 4px rgba(0, 132, 255, 0.5);\n  outline: 0;\n}\n\n@keyframes loadingSpinner {\n  to {transform: rotate(360deg);}\n}\n\n.loadingSpinner:before {\n  content: '';\n  box-sizing: border-box;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 20px;\n  height: 20px;\n  margin-top: -10px;\n  margin-left: -10px;\n  border-radius: 50%;\n  border-top: 2px solid white;\n  border-right: 2px solid transparent;\n  animation: loadingSpinner 1s linear infinite;\n}\n",s={background:"none",border:"none",padding:"0",textAlign:"left",display:"block"},a={border:"0px",height:"40px",display:"inline-block",borderRadius:"4px",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",padding:"0 18px",fontSize:"15px",fontWeight:"bold",cursor:"pointer",marginTop:"10px",verticalAlign:"middle",textAlign:"center"},l=(e,n)=>e?{backgroundColor:"#efefef",color:"#767676"}:n.includes("red")?{backgroundColor:"#e60023",color:"#fff"}:n.includes("lightGrey")?{backgroundColor:"#ebebeb",color:"#444"}:n.includes("darkGrey")?{backgroundColor:"#333",color:"#fff"}:n.includes("white")?{backgroundColor:"#fff",color:"#444"}:n.includes("blueText")?{backgroundColor:"#fff",color:"#0074e8"}:n.includes("transparent")||n.includes("blueTransparent")?{backgroundColor:"transparent",border:"1px solid #fff",color:"#fff"}:{},d=({disabled:e,loading:n,width:t})=>n?{cursor:"default",...t?{width:t}:{}}:e?{cursor:"not-allowed"}:{},c=({classArray:e,disabled:n,loading:t,styleOverrides:o,width:i})=>({...e.includes("noButtonStyles")?s:{...a,...l(n,e)},...o,...d({disabled:n,loading:t,width:i})});function u({accessibilityLabel:e,children:n,className:t,dataTestId:r,disabled:s,href:a,id:l,loading:d,onClick:u,styleOverrides:p,tabIndex:g,type:h}){const m=(0,o.useRef)(null),[b,x]=(0,o.useState)(null);(0,o.useEffect)((()=>{const e=m.current;if(e){const t=e.style||{};try{x(e.getBoundingClientRect().width+parseFloat(t.marginLeft||0)+parseFloat(t.marginRight||0))}catch(n){}}}),[]);const f=(t||"").split(" ").concat(d||s?[]:["active"]);return(0,i.jsx)("button",{"aria-label":e||"",className:f.join(" "),"data-test-id":r,disabled:s,href:a,id:l,onClick:u,ref:m,...g?{tabIndex:g}:{},style:c({classArray:f,disabled:s||!1,loading:d||!1,styleOverrides:p,width:b}),type:h||"button",children:d?(0,i.jsx)("div",{className:"loadingSpinner",style:{padding:"0 10px",position:"relative"}}):n})}},948618:(e,n,t)=>{t.d(n,{Z:()=>y});var o=t(667294),i=t(989847),r=t(151101),s=t(41743),a=t(746517),l=t(174523),d=t(883119),c=t(785893);const u=({color:e="#efefef",width:n=500,reverse:t=!1})=>{const o=t?"M49.33871,98.67741A49.33871,49.33871,0,0,1,49.33871,0h81.32258a49.33871,49.33871,0,0,1,0,98.67742H104.34757l3.17049,12.02761c.64946,1.2671-1.29892,2.53419-2.59784,1.90064L76.22791,98.67741Z":"M103.77209,98.67741,75.07978,112.60566c-1.29892.63355-3.2473-.63354-2.59784-1.90064l3.17049-12.02761H49.33871A49.33871,49.33871,0,0,1,49.33871,0h81.32258a49.33871,49.33871,0,0,1,0,98.67742Z";return(0,c.jsx)("svg",{"data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 180 113",width:n,children:(0,c.jsx)("g",{children:(0,c.jsx)("g",{children:(0,c.jsx)("g",{children:(0,c.jsx)("path",{d:o,fill:e})})})})})},p=()=>(0,c.jsx)(r.Z,{name:"unauthUser",src:"https://i.pinimg.com/originals/d1/7f/3d/d17f3dbfdeaadfb3cddbf956f0c203d0.png"}),g=({sender:e,showIconScale:n})=>{const t=(0,l.ZP)(),i=e?e.first_name:"",s=e?e.image_medium_url:"",a=n?{transform:"scale(1.8)",transition:"all .8s cubic-bezier(0.66, 0.025, 0.33, 0.975)"}:{},g=n?{opacity:1,transition:"opacity .5s cubic-bezier(0.66, 0.025, 0.33, 0.975)"}:{opacity:0};return(0,c.jsxs)(o.Fragment,{children:[(0,c.jsxs)(d.xu,{children:[(0,c.jsx)(d.xu,{position:"absolute",width:100,height:100,dangerouslySetInlineStyle:{__style:{top:"25%",left:"25%"}},children:(0,c.jsx)(r.Z,{name:i,src:s})}),(0,c.jsx)(d.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:{top:"10%",left:"30%"}},children:(0,c.jsx)(u,{width:200})})]}),(0,c.jsxs)(d.xu,{children:[(0,c.jsx)(d.xu,{position:"absolute",width:100,height:100,dangerouslySetInlineStyle:{__style:{bottom:"26%",right:"19%"}},children:(0,c.jsx)(p,{})}),(0,c.jsxs)(d.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:{bottom:"35%",right:"27%"}},children:[(0,c.jsx)(d.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:{left:"42%",top:"32%",...a}},children:(0,c.jsx)(d.JO,{accessibilityLabel:t._("checkmark Green","accesibility label for a green checkmark icon","accesibility label for a green checkmark icon"),icon:"check-circle",color:"green",size:25})}),(0,c.jsx)(u,{reverse:!0,width:200})]})]}),(0,c.jsx)(d.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:{bottom:"13%",right:"32%"}},children:(0,c.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:g},children:(0,c.jsx)(d.X6,{children:t._("Message sent!","Response letting users know the message they wrote just sent","Response letting users know the message they wrote just sent")})})})]})},h=()=>{const e=(0,l.ZP)(),[n,t]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{const e=window.setTimeout((()=>{t(!0)}),100);return()=>{window.clearTimeout(e)}}),[]),(0,c.jsxs)(o.Fragment,{children:[(0,c.jsx)(d.xu,{position:"absolute",width:100,height:100,dangerouslySetInlineStyle:{__style:n?{bottom:"26%",right:"19%",transition:"transform .8s cubic-bezier(0.66, 0.025, 0.33, 0.975)",transform:"translate(-11em, -16em)"}:{bottom:"26%",right:"19%",transition:"transform .8s cubic-bezier(0.66, 0.025, 0.33, 0.975)"}},children:(0,c.jsx)(p,{})}),(0,c.jsx)(d.xu,{position:"absolute",maxWidth:"52%",dangerouslySetInlineStyle:{__style:{bottom:"24%",right:"23%"}},children:(0,c.jsxs)(d.xu,{dangerouslySetInlineStyle:{__style:n?{opacity:1,transition:"opacity .5s cubic-bezier(0.66, 0.025, 0.33, 0.975)",transitionDelay:".8s"}:{opacity:0}},children:[(0,c.jsx)(d.X6,{children:e._("Now, set up your Pinterest account","header asking users to set up Pinteret account after signing up","header asking users to set up Pinteret account after signing up")}),(0,c.jsx)(d.xu,{paddingY:6,children:(0,c.jsx)(d.xv,{align:"center",weight:"bold",children:(0,c.jsx)("span",{className:"deprecatedTextSizeXL",children:e._("This creates a home feed of ideas you'll love","after signup and transition going into the nux step which will help customize their experience","after signup and transition going into the nux step which will help customize their experience")})})})]})})]})};function m({sender:e}){const[n,t]=(0,o.useState)(!1),[i,r]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{let e=null;return e=window.setTimeout((()=>{t(!0),e=window.setTimeout((()=>{r(!0),e=window.setTimeout((()=>{a.ZP.handleSignupRedirect("/",!0)}),3e3)}),3e3)}),500),()=>{window.clearTimeout(e)}}),[]),(0,c.jsx)(d.xu,{marginTop:12,display:"flex",flex:"grow",children:i?(0,c.jsx)(h,{}):(0,c.jsx)(g,{sender:e,showIconScale:n})})}var b=t(493616),x=t(731164),f=t(311866);function _({children:e,inTransition:n}){return(0,c.jsx)(d.xu,{color:"white","data-test-id":"signup-modal-full-page",dangerouslySetInlineStyle:{__style:{transition:"all .25s cubic-bezier(0.66, 0.025, 0.33, 0.975)",textAlign:"center",boxShadow:"0 2px 10px rgba(0,0,0,0.45)",...n?{maxWidth:"50.5em",maxHeight:"700px",height:"640px",width:"50.5em"}:{maxWidth:"60.5em",maxHeight:"500px"}}},display:"inlineBlock",margin:"auto",minHeight:450,position:"relative",rounding:2,children:e})}function y({pin:e,sender:n,responseType:t,modalType:u}){var p,g;const[h,y]=(0,o.useState)(""),[S,w]=(0,o.useState)(!1),k=(0,l.ZP)();if(S)return(0,c.jsx)(_,{inTransition:!0,children:(0,c.jsxs)(d.xu,{children:[(0,c.jsx)(d.xu,{width:"100%",color:"lightGray",rounding:2,children:(0,c.jsx)(i.Z,{duration:6500,finalProgress:100,shape:"rounded"})}),(0,c.jsx)(m,{sender:n})]})});const v=n.first_name,T=h.trim().length>0,j=(0,s.Z)(e.images,"orig");return(0,c.jsx)(_,{children:(0,c.jsxs)(d.xu,{direction:"row",alignItems:"start",justifyContent:"between",display:"flex",flex:"grow",padding:8,children:[(0,c.jsxs)(d.xu,{width:"55%",children:[(0,c.jsxs)(d.xu,{alignItems:"center",justifyContent:"between",direction:"row",display:"flex",flex:"grow",marginBottom:3,children:[(0,c.jsx)(d.xu,{marginBottom:2,children:(0,c.jsx)(d.X6,{children:k._("So, what do you think?","asking reciever what they think of the pin sent to them","asking reciever what they think of the pin sent to them")})}),(0,c.jsx)(d.xu,{children:(0,c.jsx)(r.Z,{name:v,size:"lg",src:n.image_medium_url})})]}),(0,c.jsxs)(d.xu,{marginTop:6,children:[(0,c.jsx)(d.xu,{marginBottom:6,children:(0,c.jsx)(d.Kx,{id:"unauth_response",onChange:({value:e})=>y(e),value:h,placeholder:v?k._("Reply to {{ name }}","placholder text prompting users to reply back to sender(name)","placholder text prompting users to reply back to sender(name)").replace("{{ name }}",v):"",rows:6})}),(0,c.jsx)(d.xu,{marginBottom:1,children:(0,c.jsx)(d.zx,{fullWidth:!0,text:k._("Send message","button text to send a message","button text to send a message"),color:T?"red":"gray",disabled:!T,accessibilityLabel:k._("Send message"," accessibilty label for sending a message"," accessibilty label for sending a message"),onClick:()=>{(async()=>{x.Z.increment(`web.social.unauth.response.message.${t}.click`,1),await f.ZP.create("ConversationsResource",{user_ids:[n.id],text:h,pin:e.id}).callCreate(),x.Z.increment(`web.social.unauth.response.message.${u}.${t}.send`,1),"signup"===u?w(!0):a.ZP.handleRedirect("/notifications/?tab=inbox")})()}})}),(0,c.jsx)(d.xu,{children:(0,c.jsx)(d.zx,{fullWidth:!0,text:k._("Skip for now","button text to continue signup flow without sending a message","button text to continue signup flow without sending a message"),color:"white",accessibilityLabel:k._("Skip for now"," accessibilty label for continuing signup flow without a response message"," accessibilty label for continuing signup flow without a response message"),onClick:()=>{x.Z.increment(`web.social.unauth.response.${u}.${t}.skip`,1),"signup"===u?a.ZP.handleSignupRedirect("/",!0):a.ZP.handleRedirect("/notifications/?tab=inbox")}})})]})]}),(0,c.jsx)(d.xu,{children:(0,c.jsxs)(d.xu,{rounding:2,minWidth:262,children:[(0,c.jsx)(d.xu,{display:"inlineBlock",overflow:"hidden",position:"relative",rounding:2,children:(0,c.jsx)(d.GH,{contentAspectRatio:"number"==typeof j.height&&"number"==typeof j.width?j.width/j.height:1,height:362,width:262,children:(0,c.jsx)(b.Z,{alt:null!==(p=e.description)&&void 0!==p?p:"",src:null!==(g=j.url)&&void 0!==g?g:"",style:{width:"262px",height:"362px",objectFit:"cover"}})})}),(0,c.jsx)(d.xu,{marginTop:2,children:(0,c.jsx)(d.xv,{lineClamp:1,weight:"bold",children:e.title||e.description})})]})})]})})}},394801:(e,n,t)=>{t.d(n,{Z:()=>s});var o=t(174523),i=t(883119),r=t(785893);function s(){const e=(0,o.ZP)();return(0,r.jsx)(i.kC,{alignItems:"center",justifyContent:"center",children:(0,r.jsx)(i.$j,{accessibilityLabel:e._("Loading signup form"),show:!0})})}},878742:(e,n,t)=>{t.d(n,{Z:()=>u});var o=t(667294),i=t(24306),r=t(115429),s=t(119888),a=t(483515),l=t(883119),d=t(785893);const c=["passwordReset","passwordUserName","topic","flashlight","todayTab","todayArticleFeed","todayArticleInterestFeed","ideasHub","ideasRoot","pinBookmarklet"];function u({dispatchSignupModalAction:e,handleSignupModalHide:n,hybridTier:t,inviter:u,pageType:p,setDimissibleByTier:g,setShowHybridBannerModal:h,showSignupModal:m,signupModalState:b}){const x=(0,a.Z)(),f=!!t&&x&&!c.includes(p);return(0,d.jsxs)(o.Fragment,{children:[f&&(0,d.jsx)(s.Z,{inviter:u,hybridTier:t,onHybridBannerTriggerFullscreen:h,pageType:p,showSignupModal:m,setDimissibleByTier:g}),(0,d.jsx)(i.Z,{inviter:u,dismissModal:()=>e({type:"dismiss"}),handleSignupModalHide:n,hybridTier:t,pageType:p,setShowSignupWelcomeLoading:n=>e({type:"toggleSignupWelcomeLoading",visible:n}),signupModalState:b}),b.showSignupWelcomeLoading&&(0,d.jsx)(l.xu,{opacity:1,position:"fixed",bottom:!0,top:!0,right:!0,left:!0,zIndex:new l.Ry(100),dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, 0.6)"}},children:(0,d.jsx)(r.Z,{})})]})}},24306:(e,n,t)=>{t.d(n,{Z:()=>_});var o=t(667294),i=t(948618),r=t(394801),s=t(155656),a=t(263116),l=t(586673),d=t(641483),c=t(314744),u=t(883119),p=t(233088),g=t(785893);const h=(0,a.ZP)({resolved:{},chunkName:()=>"FullPageSignup",isReady(e){const n=this.resolve(e);return!0===this.resolved[n]&&!!t.m[n]},importAsync:()=>Promise.all([t.e(97270),t.e(16458)]).then(t.bind(t,194214)),requireAsync(e){const n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then((e=>(this.resolved[n]=!0,e)))},requireSync(e){const n=this.resolve(e);return t(n)},resolve(){return 194214}}),m=({isPinOrBoardPage:e})=>((0,o.useEffect)((()=>{e&&(0,l.Z)()}),[e]),null),b=e=>{"saveButtonExp"===e&&p.Xb.getItem("unauthDesktopSavePinId")&&p.Xb.removeItem("unauthDesktopSavePinId")},x=e=>{"unauthFollowButton"===e&&p.Xb.getItem("unauthDesktopFollowId")&&p.Xb.removeItem("unauthDesktopFollowId")},f=({dismissModal:e,handleSignupModalHide:n,hybridTier:t,inviter:a,pageType:l,setShowSignupWelcomeLoading:p,signupModalState:f})=>{const[_,y]=(0,o.useState)(null),{canCloseSignupModal:S,modalType:w,mfaCreds:k,container:v,source:T,socialRegistrationCredentials:j,respondMessageModalPayload:C}=f,M=["pin","board"].includes(l);return(0,g.jsxs)(o.Fragment,{children:[!!w&&(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)(s.Z,{unsafeCSS:"body { overflow: hidden !important }"}),(0,g.jsx)(u.xu,{"data-test-id":"fullPageSignupModal",children:(0,g.jsxs)(c.Z,{canClose:S,onCloseClick:()=>{b(T),x(T),n()},type:"default",children:[(0,g.jsx)(h,{fallback:(0,g.jsx)(r.Z,{}),container:v,handleCloseButtonClick:M?()=>{(0,d.ZP)("unauth.web.page_wrapper.handle_close_click"),b(T),e()}:n,handleShowingSignupWelcomeLoading:p,hybridTier:t,inviter:a,mfaCreds:k,showResponseMessageModal:n=>{e(),y(n?"signup":"login")},...T&&{signupSource:T},socialRegistrationCredentials:j,toggleType:S?"NOT_NOW_BUTTON":"DEFAULT_TOGGLE",type:w,showCloseIcon:!0}),(0,g.jsx)(m,{isPinOrBoardPage:M})]})})]}),_&&(0,g.jsx)(u.xu,{"data-test-id":"fullPageResponseModal",children:(0,g.jsx)(c.Z,{canClose:!1,type:"default",children:!!(C&&C.pin&&a)&&(0,g.jsx)(i.Z,{modalType:_,pin:C.pin,responseType:C.type,sender:a})})})]})},_=f},115429:(e,n,t)=>{t.d(n,{Z:()=>a});var o=t(989847),i=t(174523),r=t(883119),s=t(785893);const a=()=>{const e=(0,i.ZP)();return(0,s.jsx)(r.xu,{alignItems:"center",display:"flex",justifyContent:"center",position:"absolute",width:"100%",height:"100%",children:(0,s.jsxs)(r.xu,{color:"white",height:600,minWidth:"500px",rounding:2,width:"30%",children:[(0,s.jsxs)(r.xu,{alignItems:"center",direction:"column",display:"flex",height:"99%",justifyContent:"center",padding:12,children:[(0,s.jsx)(r.xu,{alignItems:"center",color:"red",display:"flex",height:60,justifyContent:"center",marginBottom:4,rounding:"circle",width:60,children:(0,s.jsx)(r.JO,{accessibilityLabel:e._("Loading state for google one tap registration"),color:"white",icon:"pin",size:"28"})}),(0,s.jsx)(r.xu,{paddingY:5,dangerouslySetInlineStyle:{__style:{"text-align":"center"}},children:(0,s.jsx)(r.X6,{children:e._("Welcome to Pinterest!","Welcome to Pinterest!","Welcome to Pinterest!")})}),(0,s.jsx)(r.xv,{align:"center",overflow:"normal",children:(0,s.jsx)("span",{className:"deprecatedTextSizeXL",children:e._("Your answers to the next questions will help us find the right ideas for you","loading state description while waiting for google one tap registration to complete","loading state description while waiting for google one tap registration to complete")})})]}),(0,s.jsx)(r.xu,{width:"100%",children:(0,s.jsx)(o.Z,{duration:6e3,finalProgress:95,shape:"rounded"})})]})})}},377556:(e,n,t)=>{t.d(n,{ki:()=>c,ZP:()=>p});var o=t(667294),i=t(933789),r=t(765197),s=t(174523),a=t(883119),l=t(785893);function d(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}const c=["placeholder","-webkit-input-placeholder","-moz-placeholder","-ms-input-placeholder","-moz-placeholder"].map((e=>`\n.UnauthTextInputField__gray::${e} {\n  color: #767676;\n}\n.UnauthTextInputField__darkGray::${e} {\n  color: #333;\n}\n`)).join("");class u extends o.Component{constructor(...e){super(...e),d(this,"state",{initialFocus:this.props.focused||!1}),d(this,"renderErrorIcon",(e=>{const{i18n:n,isRTL:t}=this.props;if(e){const e={position:"absolute",top:10,width:14,...t?{left:14}:{right:14}};return(0,l.jsx)("div",{className:"InputField__errorIcon",style:e,children:(0,l.jsx)(a.JO,{accessibilityLabel:n._("Remove","Accessible label for error icon","Accessible label for error icon"),color:"red",icon:"remove",inline:!0,size:14})})}})),d(this,"renderTooltip",((e,n)=>{if(!e||!n)return;const{isRTL:t}=this.props;return(0,l.jsx)(i.Z,{message:e,isRTL:t})})),d(this,"renderGestaltInputField",(()=>{const{autoComplete:e,disabled:n,domainError:t,hasError:o,id:i,inputRef:r,name:s,onBlur:d,onChange:c,onFocus:u,onKeyDown:p,helperText:g,placeholder:h,tooltip:m,type:b,useExperimentalTextfield:x,value:f}=this.props,_=o||m?m:"",y=_?x&&t||_:"";return(0,l.jsx)(a.nv,{autoComplete:x?void 0:e,disabled:n,errorMessage:y,helperText:x?void 0:g,id:i,name:s,onBlur:d,onChange:({event:e})=>{c(e)},onFocus:u,onKeyDown:x?()=>{}:p,placeholder:h,ref:e=>{this._input=e,null==r||r(e)},size:x?void 0:"lg",type:b,value:f||""})}))}componentDidMount(){this.state.initialFocus&&this.focusInput()}componentDidUpdate(e){this.props.hasError&&!1===e.hasError&&this.focusInput()}focusInput(){this._input&&this._input.focus()}renderVanillaTextInputField(e,n){return(0,l.jsxs)(a.xu,{children:[(0,l.jsx)("input",{ref:e=>{this._input=e,this.props.inputRef&&this.props.inputRef(e)},"aria-label":this.props.accessibilityLabel||this.props.placeholder,autoComplete:this.props.autoComplete,className:e,name:this.props.name,onBlur:this.props.onBlur,onChange:this.props.onChange,onClick:this.props.onClick,onFocus:this.props.onFocus,placeholder:this.props.placeholder,style:n,type:this.props.type,value:this.props.value||"",onKeyDown:this.props.onKeyDown}),this.renderErrorIcon(!!this.props.hasError),this.renderTooltip(this.props.tooltip,!!this.props.hasError)]})}render(){let e={backgroundColor:"#fff",border:"solid 1px #ccc",WebkitBoxShadow:"none",boxShadow:"none",position:"relative",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",borderRadius:"3px",fontWeight:"bold",padding:"10px",WebkitBoxSizing:"border-box",boxSizing:"border-box",width:"100%",color:"#333",fontSize:"14px"};this.props.inputStyleOverrides&&(e={...e,...this.props.inputStyleOverrides}),this.props.hasError&&(e={...e,...this.props.isRTL?{paddingLeft:"34px"}:{paddingRight:"34px"}});let n="";return"gray"===this.props.placeholderColor?n="UnauthTextInputField__gray":"darkGray"===this.props.placeholderColor&&(n="UnauthTextInputField__darkGray"),(0,l.jsxs)("fieldset",{className:this.props.classNames,style:{position:"relative",...this.props.fieldsetStyleOverrides||{}},children:[this.props.inputFieldTitle?(0,l.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",color:"#333",float:"left",fontFamily:r.c,fontSize:"16px",fontStyle:"normal",fontWeight:"bold",margin:"15px 0px 5px 3px"}},children:this.props.inputFieldTitle}):null,this.props.useGestalt?this.renderGestaltInputField():this.renderVanillaTextInputField(n,e)]})}}function p(e){const n=(0,s.ZP)();return(0,l.jsx)(u,{...e,i18n:n})}d(u,"defaultProps",{autoComplete:"on",hasError:!1})},933789:(e,n,t)=>{t.d(n,{g:()=>r,Z:()=>a});var o=t(883119),i=t(785893);const r="\n.Tooltip_message:before, .Tooltip_message:after {\n  border-style: solid;\n  content: '';\n  display: block;\n  margin-top: -8px;\n  position: absolute;\n  right: 100%;\n  top: 17px;\n  width: 0;\n}\n.Tooltip_message:before {\n  border-color: transparent rgba(0,0,0,0.48);\n  border-width: 8px 10px 8px 0;\n}\n.Tooltip_message:after {\n  border-color: transparent #fff;\n  border-width: 8px 10px 8px 0;\n  margin-right: -1px;\n}\n.Tooltip_suggestionMessage:before, .Tooltip_suggestionMessage:after {\n  border-style: solid;\n  content: '';\n  display: block;\n  margin-top: -8px;\n  position: absolute;\n  right: 100%;\n  top: 17px;\n  width: 0;\n}\n.Tooltip_suggestionMessage:before {\n  border-color: transparent rgba(0,0,0,0.48);\n  border-width: 8px 10px 8px 0;\n}\n.Tooltip_suggestionMessage:after {\n  border-color: transparent #E2780D;\n  border-width: 8px 10px 8px 0;\n}\n.Tooltip_mobileMessage:before, .Tooltip_message:after {\n  border-style: solid;\n  display: block;\n  margin-top: -8px;\n  position: absolute;\n  right: 100%;\n  top: 17px;\n  width: 0;\n}\n.Tooltip_mobileMessage:before {\n  border-color: transparent rgba(0,0,0,0.48);\n  border-width: 8px 10px 8px 0;\n}\n.Tooltip_mobileMessage:after {\n  border-color: transparent #fff;\n  border-width: 8px 10px 8px 0;\n  margin-right: -1px;\n}\n.Tooltip_wrapper {\n  position: absolute;\n  left: calc(100% + 12px);\n  z-index: 1;\n}\n.Tooltip_mobileWrapper {\n  margin-top: 7px;\n  z-index: 1;\n}\n",s={overflowWrap:"break-word",wordWrap:"break-word"};function a({message:e,customWrapperStyles:n,isSuggestionTooltip:t,children:r,isRTL:a}){return(0,i.jsxs)("div",{className:"Tooltip_wrapper","data-test-id":"tooltip",style:{top:"0px",width:"215px",...n},children:[(0,i.jsx)("div",{className:t?"Tooltip_suggestionMessage":"Tooltip_message",style:{background:"#fff",borderRadius:"6px",WebkitBoxShadow:"0 0 2px rgba(0,0,0,0.38),0 1px 3px rgba(0,0,0,0.32)",boxShadow:"0 0 2px rgba(0,0,0,0.38),0 1px 3px rgba(0,0,0,0.32)",color:"#000",fontStyle:"normal",fontWeight:"normal",lineHeight:"150%",padding:"8px 14px",textAlign:a?"right":"left",maxWidth:"215px",display:"inline-block",float:"left",...t?{boxShadow:"none",background:"#E2780D",color:"#fff",fontSize:"14px",WebkitBoxShadow:"none"}:{}},children:r?(0,i.jsx)("span",{style:s,children:r}):(0,i.jsx)("span",{dangerouslySetInnerHTML:{__html:e},style:s})}),(0,i.jsx)(o.xu,{})]})}},938265:(e,n,t)=>{t.d(n,{Z:()=>c});var o=t(667294),i=t(314744),r=t(174523),s=t(153166),a=t(883119),l=t(785893);const d=({dismiss:e,errorMessage:n})=>{const t=(0,r.ZP)();return(0,l.jsx)(i.Z,{canClose:!1,hidden:!1,type:"error",children:(0,l.jsxs)(a.xu,{color:"white",margin:"auto",width:380,zIndex:new a.Ry(2e3),dangerouslySetInlineStyle:{__style:{borderRadius:"6px"}},children:[(0,l.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{fontSize:"20px",fontWeight:"bold",borderBottom:"1px solid #e7e7e7"}},padding:5,children:t._("Oops!","unauth.error.modal","Header for error modal")}),(0,l.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{color:"#333",fontSize:"14px",lineHeight:"21px"}},padding:5,children:n}),(0,l.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{background:"#f0f0f0",borderBottom:"1px solid #dadada",borderRadius:"0 0 6px 6px",padding:"10px 20px"}},height:30,children:(0,l.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{float:"right"}},children:(0,l.jsx)("button",{className:"UnauthBanner__continueButton",onClick:()=>e(),style:{backgroundColor:"#ab171e",border:"1px solid #820a0f",borderRadius:"3px",color:"#fff",cursor:"pointer",fontSize:"14px",fontWeight:"bold",padding:"6px 12px"},children:t._("Okay","unauth.error.modal.okay","Button text for accepting that there was an error")})})})]})})},c=({children:e})=>{const[n,t]=(0,o.useState)(null),i=(0,o.useRef)(null);return(0,s.o)((e=>{t(e),clearTimeout(i.current),i.current=setTimeout((()=>{t(null)}),3e3)})),(0,o.useEffect)((()=>()=>{clearTimeout(i.current)}),[]),(0,l.jsxs)(o.Fragment,{children:[e,!!n&&(0,l.jsx)(d,{dismiss:()=>t(null),errorMessage:n})]})}},314744:(e,n,t)=>{t.d(n,{Z:()=>l});var o=t(667294),i=t(641483),r=t(883119),s=t(785893);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}class l extends o.Component{constructor(...e){super(...e),a(this,"state",{hidden:this.props.hidden||!1}),a(this,"handleKeyDown",(e=>{const{canClose:n,type:t}=this.props;"Escape"===e.key&&((0,i.ZP)(`unauth.authentication_modal.esc_key_click.NOT_NOW_BUTTON.${t}.${n?"can":"cant"}_close`),n&&((0,i.ZP)(`unauth.authentication_modal.esc_key_click.DISMISSED.${t}`),this.close())),e.stopPropagation()})),a(this,"close",(()=>{const{onCloseClick:e,onHide:n}=this.props;e?e():(this.setState({hidden:!0}),n&&n())}))}componentDidMount(){window.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){window.removeEventListener("keydown",this.handleKeyDown)}render(){const{hidden:e}=this.state,{canClose:n,children:t,type:o}=this.props;return e?null:(0,s.jsx)(r.xu,{bottom:!0,left:!0,opacity:1,position:"fixed",right:!0,top:!0,zIndex:new r.Ry(1e4),dangerouslySetInlineStyle:{__style:{backgroundColor:"closeup"===o?"rgba(239, 239, 239, 0.96)":"rgba(0, 0, 0, 0.6)",cursor:"closeup"===o?"zoom-out":void 0}},children:(0,s.jsx)("div",{onClick:()=>{(0,i.ZP)(`unauth.full_page_modal.${o}.empty_space_click`),n&&this.close()},role:"dialog",style:{WebkitOverflowScrolling:"touch",overflowY:"scroll",bottom:0,left:0,right:0,top:0,position:"fixed",display:"flex"},children:(0,s.jsx)("div",{onClick:e=>{e.stopPropagation()},onKeyDown:e=>{n&&"Escape"===e.key&&e.stopPropagation()},role:"dialog",style:{height:"100%",display:"flex",minHeight:"0px",position:"relative",opacity:1,borderRadius:"6px",margin:"0 auto"},children:t})})})}}},119888:(e,n,t)=>{t.d(n,{Z:()=>M});var o=t(667294),i=t(155656),r=t(129724),s=t(263116),a=t(823493),l=t.n(a),d=t(883119),c=t(563507),u=t(912397),p=t(181307),g=t(585967),h=t(641483),m=t(657658),b=t(966427),x=t(785893);function f(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}const _=(0,s.ZP)({resolved:{},chunkName:()=>"UnauthHybridBannerSignupModal",isReady(e){const n=this.resolve(e);return!0===this.resolved[n]&&!!t.m[n]},importAsync:()=>t.e(33099).then(t.bind(t,969369)),requireAsync(e){const n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then((e=>(this.resolved[n]=!0,e)))},requireSync(e){const n=this.resolve(e);return t(n)},resolve(){return 969369}}),y=10,S=5,w=800,k=64,v=({scrollSessionCount:e,dismissed:n},t,o)=>{if((0,c.o)()||o)return{bannerSize:"quarterScreenBanner"};if("tier1"===t){const t=3===e;return!t||n||(0,r.Z)()?{bannerSize:t?"noBanner":"quarterScreenBanner"}:{bannerSize:"fullScreenBanner",isDismissible:!0,signupSource:"login"}}return e<=("tier2"===t?3:2)?{bannerSize:"quarterScreenBanner"}:{bannerSize:"fullScreenBanner",isDismissible:!1}};class T extends o.Component{constructor(...e){super(...e),f(this,"state",{scrollSessionCount:0,bannerSize:"noBanner",isDismissible:!1,dismissed:!1,signupSource:"defaultSource"}),f(this,"onScrollHybridBanner",(e=>{const{hybridTier:n,isSafari:t}=this.props;let o=0;const i=e&&e.target;i&&i.documentElement&&i.documentElement.scrollTop>0?o=i.documentElement.scrollTop:i&&i.body&&i.body.scrollTop>0&&(o=i.body.scrollTop);const r=w*S;o<k*(this.props.enabledSignInValueUpsell?2:1)?this.setState({bannerSize:"noBanner"}):o<r?this.setState({...v(this.state,n,t),scrollSessionCount:Math.ceil(o/w)}):(0,m.F)()||(0,c.o)()||(t?(e&&e.preventDefault(),this.showAlternateSignupModal()):"tier1"===n?this.setState({bannerSize:"fullScreenBanner",isDismissible:!0,signupSource:"login"}):this.setState({bannerSize:"fullScreenBanner",isDismissible:!1}))})),f(this,"onScrollHybridBannerThrottled",l()(this.onScrollHybridBanner,y)),f(this,"showAlternateSignupModal",(()=>{const{hybridTier:e,showSignupModal:n,setDimissibleByTier:t}=this.props,{signupSource:o}=this.state,i="tier1"===e?"login":o;n("login"===(i||o)?"login":"signupOrPersonalizedLogin",{source:i,container:"inspired_banner"}),t(),(0,m.w)()})),f(this,"handleDismissSignupModal",(()=>{this.setState({bannerSize:"quarterScreenBanner",dismissed:!0})}))}componentDidMount(){window.addEventListener("scroll",this.onScrollHybridBannerThrottled)}componentDidUpdate(e,n){const{bannerSize:t}=this.state,{onHybridBannerTriggerFullscreen:o}=this.props;"fullScreenBanner"===t&&"quarterScreenBanner"===n.bannerSize&&o?((0,h.NC)("show_prompted_modal"),o(!0)):"quarterScreenBanner"===t&&"fullScreenBanner"===n.bannerSize&&o&&(o(!1),(0,h.ZP)("unauth.web.dismiss_modal_via_scroll"))}componentWillUnmount(){window.removeEventListener("scroll",this.onScrollHybridBannerThrottled)}render(){const{isBot:e,inviter:n,hybridTier:t,showSignupModal:o}=this.props,{bannerSize:r,isDismissible:s,dismissed:a,signupSource:l}=this.state;if(e)return null;const c="fullScreenBanner"===r&&s&&!a;return(0,x.jsxs)(d.xu,{children:[c&&(0,x.jsx)(i.Z,{unsafeCSS:"body { overflow: hidden }"}),(0,x.jsx)(_,{fallback:(0,x.jsx)(d.xu,{}),canClose:s,handleDismissSignupModal:this.handleDismissSignupModal,hybridTier:t,bannerSize:r,onSignupClick:()=>o("signup",{source:"defaultSource",container:u.X6}),onLoginClick:()=>{o("login",{source:"login",container:u.X6})},signupSource:l,toggleType:s?"NOT_NOW_BUTTON":"DEFAULT_TOGGLE",inviter:n})]})}}const j=()=>{const{userAgent:{browserName:e}}=(0,g.B)(),n=e||"";return"number"==typeof n?n:(0,b.u)(n||"")},C=e=>{const{isBot:n}=(0,g.B)(),t=j(),o=(0,p.tc)("web_unauth_sign_in_value_upsell"),i=["upsell_value_prop","upsell_value_prop_cta","upsell_multi_value_props","upsell_value_prop_on_hover"].includes(o().group);return(0,x.jsx)(T,{...e,enabledSignInValueUpsell:i,isBot:n,isSafari:t===b.o.SAFARI})},M=C},697974:(e,n,t)=>{t.r(n),t.d(n,{exchangeTokenAndSetSession:()=>c,verifyLoggedInStatus:()=>u,registerUser:()=>p,loginUser:()=>g});var o=t(238402),i=t(311866),r=t(180307),s=t(641483),a=t(116955);const l=r.Z.settings.ACCOUNTS_PINTEREST_URL,d=(e,n,t,o)=>{const i=e=>{const n=new Error(e.statusText);throw n.response=e,!n.api_error_code&&n.response&&(n.api_error_code=n.response.code,n.message=n.response.message),n},r={credentials:"include",mode:"cors"};return"POST"===t&&(r.method="POST",r.body=n,r.headers={"Content-type":"application/x-www-form-urlencoded; charset=UTF-8","X-Pinterest-InstallId":o},o||(0,s.ZP)(`unauth.auth_handshake.cross_domain.no_unauth_id.${t}`)),fetch(e,r).then((e=>200===e.status||401===e.status||409===e.status?e:(i(e),{}))).then((e=>e.json())).then((e=>"success"===e.status?Promise.resolve(e):e.code===a.Zn?(e.api_error_code=e.code,Promise.reject(e)):(i(e),{}))).catch((e=>{throw e}))},c=(e,n=!1)=>i.ZP.create("HandshakeSessionResource",{token:e,isRegistration:n}).callCreate(),u=e=>{d(`${l}/v3/handshake/verify/`,"","GET",e).then((e=>{if(e&&e.data){const n=e.data;c(n).then((e=>{window.location.reload()}),(e=>{}))}}),(e=>{}))},p=(e,{facebookToken:n,inviteCode:t,locale:i,referrer:s,unauthId:a})=>{const l=(e.business_name?"partner/handshake":(e.gplus_code||e.gplus_id_token)&&"gplus/handshake")||e.facebook_id&&"facebook/handshake"||"email/handshake",c={};if(c.email=e.email||"",c.username=e.username||"",c.password=e.password||"",c.first_name=e.first_name||"",c.last_name=e.last_name||"",c.country=e.country||"",c.locale=i,c.referrer=s,e.age){const n=new Date;n.setFullYear(n.getFullYear()-e.age);const t=parseInt(n/1e3,10);c.birthday=t.toString()}if(e.custom_gender&&(c.custom_gender=e.custom_gender),e.gender&&(c.gender=e.gender),e.business_name&&(c.account_type=e.account_type,c.business_name=e.business_name,c.first_name=e.business_name),t&&(c.invite_code=t),e.facebook_id){const t=n||e.facebook_token||"";c.facebook_id=e.facebook_id,c.facebook_token=t,c.social_username=e.social_username||""}else(e.gplus_code||e.gplus_id_token)&&(c.password=e.password||"",c.one_time_code=e.gplus_code,c.id_token=e.gplus_id_token,c.redirect_uri=e.gplus_redirect_uri);return e.recaptchaV3Token&&(c.recaptcha_v3_token=e.recaptchaV3Token),d(`${r.Z.settings.ACCOUNTS_PINTEREST_URL}/v3/register/${l}/`,(0,o.Z)(c),"POST",a)},g=(e,{facebookToken:n,recaptchaV3Token:t,referrer:i,unauthId:s})=>{const a=(e.mfa_token?"mfa/handshake":e.gplus_id_token&&"gplus/handshake")||e.facebook_id&&"facebook/handshake"||"handshake",l={};if(e.username_or_email&&(l.username_or_email=e.username_or_email.trim(),l.password=e.password,l.referrer=i),e.facebook_id){const t=n||e.facebook_token||"";l.facebook_id=e.facebook_id,l.facebook_token=t,l.facebook_autologin=e.facebook_autologin||!1}return e.gplus_id_token&&(l.gplus_id_token=e.gplus_id_token,l.gplus_access_token=e.gplus_access_token,l.gplus_expires_at=e.gplus_expires_at,l.gplus_autologin=e.gplus_autologin||!1),e.mfa_token&&(l.mfa_token=e.mfa_token),t&&(l.token=t),d(`${r.Z.settings.ACCOUNTS_PINTEREST_URL}/v3/login/${a}/`,(0,o.Z)(l),"POST",s)}},352824:(e,n,t)=>{t.d(n,{Z:()=>b});var o=t(85038),i=t(227361),r=t.n(i),s=t(311866),a=t(233088),l=t(899679),d=t(221469),c=t(804652),u=t(116955),p=t(697974),g=t(641483);let h=0;const m=(e,n)=>{const t={...e},{onCorsHandshakeHost:i,registerUserContext:b,sendActiveUserPing:x,successWithoutTokenErrorMessage:f}=n,_=a.ZP.localStorage.getItem("visitedPages"),y=r()(window,["location","search"],null),S=(0,d.mB)(y).utm_campaign;_&&(t.visited_pages=JSON.stringify(_)),S&&(t.utm_campaign=S);const w=a.ZP.localStorage.getItem("visitedPinLandingPagesBeforeLogin");if(w){const e=[];for(const n of w)n.is_shared_pin&&e.push({ts:n.ts,path:n.path,first_pin_image_signature:n.image_signature,is_shared:!0});e&&(t.visited_pages=JSON.stringify(e.concat(_||[])))}t.user_behavior_data=(()=>{const e={};return["signupTriedSkipInputName","signupTriedSkipGender","unauthTopicsFollowed"].forEach((n=>{const t=a.ZP.localStorage.getItem(n);t&&(e[n]=t)})),JSON.stringify(e)})();const k=e=>((0,c.Dm)("signup"),o.zN("galae"),o.zN("fbalae"),x(),o.t8("ujr","1"),((e,{logContextEventType:n,trackRegisterSuccess:t})=>{let o;switch(e.container){case"home_page":o=1750,(0,g.My)("signup_home_page");break;case"mweb_homepage":o=1750,(0,g.My)("signup_mweb_home_page");break;case"plain_signup_modal":o=1751,(0,g.My)("signup_plain_modal");break;case"closeup_signup_modal":o=1752,(0,g.My)("signup_closeup_modal");break;case"widescreen_signup_modal":o=1753,(0,g.My)("signup_widescreen_modal");break;case"pinit_button_landing":o=1755,(0,g.My)("signup_pinit_button_landing");break;case"inspired_banner":(0,g.My)("signup_inspired_banner");break;case"category_jump_banner":(0,g.My)("signup_category_jump_banner");break;case"send_pin_banner":o=1756,(0,g.My)("send_pin_banner");break;default:o=1754,(0,g.My)("signup_unknown_placement")}const i=e.container||"container_unknown";(0,g.My)(`signup.container.${i}`);const r=e.signupSource||"signupSource_unknown";(0,g.My)(`signup.source.${r}`),o&&n(o);const s=document.referrer;let a;a=s?s.indexOf("/t.co/")>-1?"twitter":s.indexOf("google.")>-1?"google":s.indexOf("bing.")>-1?"bing":s.indexOf("facebook.")>-1?"facebook":"other":"direct",(0,g.My)(`signup_referrer.${a}`),t(),(0,g.My)(`web_signup.${(0,l.sR)(e)}.success.${e.page||"page_unknown"}.${i}.${a}.${e.hybridTier||"tier_unknown"}`),(0,g.De)({action:"signup",event:"success",type:(0,l.sR)(e)})})(t,n),e),v=e=>{e.api_error_code===u.tz&&((0,g.My)("multi_step_set_age_restrict_cookie"),o.t8("r_r","1",4320));if((!e.api_error_code||[u.dO,u.cZ].includes(e.api_error_code))&&h<3)return(0,g.My)(`unauth_web.signup_retry_error.${String(e.api_error_code)}.${String(t.container)}`),h+=1,m(t,n);throw(0,g.De)({action:"signup",event:"fail",type:(0,l.sR)(t)}),e};if(!t.facebook_id&&!t.gplus_code&&!t.gplus_id_token&&!t.google_open_id_token&&!t.line_id_token&&Boolean(t.email)&&i){(0,g.My)("unauth_cross_domain_register_debugging_counter");const e=e=>{(0,g.My)(`web_cross_domain_register.${e}.${(0,l.sR)(t)}`)};return e("attempt"),(0,p.registerUser)(t,b).then((n=>{k(n);const t=n.data||"";if(t)return e("success_with_token"),(0,p.exchangeTokenAndSetSession)(t,!0).then((n=>{e("success_token_exchanged")}),(n=>{throw e("success_token_not_exchanged"),n}));throw e("success_without_token"),new Error(f)}),(n=>{e("failure"),v(n)}))}return s.ZP.create("UserRegisterResource",t).callCreate().then((e=>k(e)),(e=>v(e)))},b=m},848101:(e,n,t)=>{t.d(n,{I7:()=>l,B$:()=>d,Cw:()=>s,c4:()=>a});var o=t(667294),i=t(762803);const r=(0,o.createContext)(null),s=()=>(0,o.useContext)(r),a=r.Provider,{Provider:l,useHook:d}=(0,i.ZP)("DesktopCoreLogin")},153166:(e,n,t)=>{t.d(n,{x:()=>s,o:()=>a});var o=t(667294),i=t(174523);const r="handleErrorMessage",s=e=>{const n=document.createEvent("CustomEvent");n.initCustomEvent(r,!0,!0,{message:e}),window.dispatchEvent(n)},a=e=>{const n=(0,i.ZP)();(0,o.useEffect)((()=>{const t=t=>{var o;e((null==t||null===(o=t.detail)||void 0===o?void 0:o.message)||n._("Unknown Error","unauth.error.modal.unknown","Text saying an unknown error occurredr"))};return window.addEventListener(r,t),()=>{window.removeEventListener(r,t)}}),[])}},953867:(e,n,t)=>{t.d(n,{Z:()=>s});var o=t(544004),i=t(632262),r=t(933789);const s=[o.l,i.m,r.g].join("")},129724:(e,n,t)=>{t.d(n,{Z:()=>i});var o=t(233088);const i=()=>{const e=o.ZP.localStorage.getItem("unauthHybridLoginModalView")||0;return Math.ceil((Date.now()-e)/1e3)<60}},586673:(e,n,t)=>{t.d(n,{Z:()=>i});var o=t(233088);const i=()=>{try{o.ZP.localStorage.setItem("unauthHybridLoginModalView",Date.now())}catch(e){console.error(e)}}},383616:(e,n,t)=>{t.d(n,{Z:()=>S});var o=t(667294),i=t(773432),r=t(799881),s=t(129724);const a=(e,n)=>{var t,o,i,r,s,a,l;switch(n.type){case"dismiss":return{...e,modalType:null,canCloseSignupModal:null!==(t=n.canCloseSignupModal)&&void 0!==t?t:e.canCloseSignupModal};case"show":return{...e,modalType:n.modalType,mfaCreds:null!==(o=n.mfaCreds)&&void 0!==o?o:e.mfaCreds,container:null!==(i=n.container)&&void 0!==i?i:e.container,canCloseSignupModal:null!==(r=n.canCloseSignupModal)&&void 0!==r?r:e.canCloseSignupModal,respondMessageModalPayload:null!==(s=n.respondMessageModalPayload)&&void 0!==s?s:e.respondMessageModalPayload,socialRegistrationCredentials:null!==(a=n.socialRegistrationCredentials)&&void 0!==a?a:e.socialRegistrationCredentials,source:null!==(l=n.source)&&void 0!==l?l:e.source};case"setDismissible":return{...e,canCloseSignupModal:n.canCloseSignupModal};case"toggleSignupWelcomeLoading":return{...e,showSignupWelcomeLoading:n.visible};default:return e}},l=()=>(0,o.useReducer)(a,{canCloseSignupModal:!0,container:"",mfaCreds:null,modalType:null,respondMessageModalPayload:null,showSignupWelcomeLoading:!1,socialRegistrationCredentials:null,source:null});var d=t(221469),c=t(848101),u=t(641483),p=t(657658),g=t(233088),h=t(903945);const m=(e,n=604800)=>{const t=(0,h.qn)(e);return t&&Date.now()-parseInt(t,10)>1e3*n},b=(e=604800)=>{const n=g.ZP.localStorage.getItem("unauthHybridClickthroughCount");return m("unauthHybridClickthroughTS",e)||!n?0:parseInt(n,10)||0};var x=t(563507),f=t(912397),_=t(855168);const y=["todayArticleFeed","todayTab"],S=({hybridTier:e,pageType:n})=>{const[t,a]=l(),[h,S]=(0,o.useState)(!1),{loginForMore:w}=(0,c.B$)(),k=(0,_.k6)(),v=(0,_.TH)(),T=()=>{w&&y.includes(n)&&w.setVisible(!1),a({type:"dismiss",canCloseSignupModal:!0})},j=(n,t)=>{var o;a({type:"show",modalType:n,container:null==t?void 0:t.container,source:null==t?void 0:t.source,respondMessageModalPayload:null==t?void 0:t.respondMessageModalPayload,canCloseSignupModal:null===(null==t?void 0:t.forceOpen)?void 0:!(null!=t&&t.forceOpen)}),(0,u.ZP)(`unauth_web_container.${null!==(o=(null==t?void 0:t.containerForLogging)||(null==t?void 0:t.container))&&void 0!==o?o:"undefined"}.${e}.${n}.shown`),(0,u.LW)({action:"trigger",page_location:v,item:n.includes("signup")?"signup-modal":"login-modal"}),null!=t&&t.skipTrackHistory||(0,u.NC)("show_willing_modal")},C=e=>j("login",{container:e,forceOpen:null,skipTrackHistory:!0}),M=Boolean(null==w?void 0:w.visible),Z=(0,o.useRef)(M);(0,o.useEffect)((()=>{M!==Z.current&&(Z.current=M,y.includes(n)&&(M?C(n):T()))})),(0,o.useEffect)((()=>{(0,u.ZP)(`unauth_web.unauth_page_wrapper.${n}.mounted.is_mobile_false`);"p100"===(0,d.mB)(window.location.search).utm_source&&(0,x.$)()}),[]);const I=()=>a({type:"setDismissible",canCloseSignupModal:"tier1"===e}),P=!!t.modalType||h;return{dispatchSignupModalAction:a,handleSignupModalHide:T,pinImageClickHandler:({event:t,pin:o,linkTarget:l})=>{t&&t.preventDefault(),(0,u.ZP)(`unauth.desktop.${n}.pin_image.click`),(0,u.LW)({action:"click",page:(0,u.E8)(n),item:"pin"});const d="pin"===n,c=d&&"tier1"!==e?"signup":"login";let g=null;(0,x.o)()||((0,p.F)()?(0,s.Z)()?(0,u.ZP)(`unauth.desktop.${n}.in_cooldown_period`):g={d:"t",mt:"tier1"===e?"login":"signupOrPersonalizedLogin"}:((0,p.w)(),g={d:"t",mt:c}));const h=(0,i.Z)(`/pin/${o.id}/`,g||{});if("fullPageLoad"!==l){if("duploClientNav"===l)k.push(h);else{window.open(h,"_blank").focus()}a({type:"dismiss",canCloseSignupModal:!0}),(0,p.F)()||(0,x.o)()||((0,p.w)(),j(c,{container:d?f.PF:void 0,containerForLogging:f.s7,forceOpen:null,skipTrackHistory:!0}))}else(0,r.Z)(h,!1)},pinLinkClickHandler:()=>{if(((e=604800)=>{const n=b();if(m("unauthHybridClickthroughTS",e)||!n)try{g.ZP.localStorage.setItem("unauthHybridClickthroughCount",1),g.ZP.localStorage.setItem("unauthHybridClickthroughTS",Date.now())}catch(t){console.error(t)}else try{g.ZP.localStorage.setItem("unauthHybridClickthroughCount",n+1)}catch(t){console.error(t)}})(),(0,x.o)())return;const n=b();I(),"tier1"===e?2!==n&&n%5!=0||C(f.a2):n>=2&&j("signupOrPersonalizedLogin",{source:"defaultSource",container:f.a2})},setDimissibleByTier:I,setShowHybridBannerModal:S,modalOpened:P,showResponseModalSignup:(e,n)=>j("respondMessage",{source:"defaultSource",container:f.I6,respondMessageModalPayload:{type:e,pin:n}}),showSignupModal:j,signupModalState:t}}},738697:(e,n,t)=>{t.d(n,{Z:()=>i});var o=t(765197);const i="\narticle,\naside,\ndetails,\nfigcaption,\nfigure,\nfooter,\nheader,\nhgroup,\nnav,\nsection,\nul {\n  display: block;\n}\n\naudio,\ncanvas,\nvideo {\n  display: inline-block;\n}\n\naudio:not([controls]) {\n  display: none;\n}\n\nhtml {\n  font-size: 100%;\n  text-size-adjust: none;\n}\n\na:hover,\na:active {\n  outline: 0;\n}\n\nsub,\nsup {\n  position: relative;\n  font-size: 75%;\n  line-height: 0;\n  vertical-align: baseline;\n}\nsup {\n  top: -0.5em;\n}\nsub {\n  bottom: -0.25em;\n}\n\nimg {\n  max-width: 100%;\n  width: auto;\n  height: auto;\n\n  vertical-align: middle;\n  border: 0;\n  -ms-interpolation-mode: bicubic;\n}\n\n#map_canvas img {\n  max-width: none;\n}\n\nfieldset {\n  border: 0;\n  margin: 0;\n  padding: 0;\n}\n\nbutton,\ninput,\nselect,\ntextarea {\n  font-size: 100%;\n  margin: 0;\n  vertical-align: middle;\n}\nbutton,\ninput {\n  overflow: visible;\n  line-height: normal;\n}\nbutton::-moz-focus-inner,\ninput::-moz-focus-inner {\n  padding: 0;\n  border: 0;\n}\nbutton,\ninput[type='button'],\ninput[type='reset'],\ninput[type='submit'] {\n  cursor: pointer;\n  -webkit-appearance: button;\n}\ntextarea {\n  overflow: auto;\n  vertical-align: top;\n}\nbody {\n  margin: 0;\n}\nh1, h2, h3, h4, h5, h6 {\n  margin: 0;\n}\nfigure {\n  margin: 0;\n}"+`\nhtml {\n  background-color: #fff;\n}\n\nhtml, body {\n  font-family: ${o.c};\n  color: rgb(33, 25, 34);\n  font-size: 12px;\n  height: 100%;\n}\n\nbody {\n  position: relative;\n  overflow-y: overlay;\n  overflow-x: hidden;\n}\n\ninput::-ms-clear {\n  display: none;\n}\n\na {\n  color: #717171;\n  font-weight: bold;\n  text-decoration: none;\n}\n\na:focus,\na:hover {\n  color: #8a8a8a;\n}\n\nul {\n  margin: 0;\n  padding: 0;\n}\n\nul li {\n  list-style: none;\n  padding: 0;\n}\n\n:focus {\n  outline: #d1d1d1 auto 1px\n}\n\nbutton, input, select, textarea {\n  font-family: ${o.c};\n  font-size: 100%;\n  vertical-align: middle;\n  margin: 0px;\n}\n\n.SkipToContent {\n  display: none;\n}\n`},85672:(e,n,t)=>{t.d(n,{Z:()=>r});const o=["AU","US","CA","IE","NZ","GB","CO","ID"],i=["AT","BE","CH","CZ","DK","ES","NO","PT","SE","NL"];function r(e,n=!1){return n||!e||o.includes(e)?"tier1":i.includes(e)?"tier2":"tier3"}},657658:(e,n,t)=>{t.d(n,{F:()=>i,w:()=>r});var o=t(85038);const i=()=>o.U2("hasBeenShownLoginModalInOpen"),r=()=>{o.t8("hasBeenShownLoginModalInOpen","true",12)}},563507:(e,n,t)=>{t.d(n,{$:()=>s,o:()=>a});var o=t(233088),i=t(611277);const r="openUnauthType",s=()=>{o.ZP.sessionStorage.setItem(r,"OPEN_UNAUTH")},a=()=>(0,i.a)()||"OPEN_UNAUTH"===o.ZP.sessionStorage.getItem(r)},611277:(e,n,t)=>{t.d(n,{a:()=>i,B:()=>r});var o=t(233088);const i=()=>o.ZP.localStorage.getItem("uoiou")||!1,r=e=>{o.ZP.localStorage.setItem("uoiou",!!e)}},41743:(e,n,t)=>{t.d(n,{Z:()=>i});const o=["orig","736x","564x","474x","236x","170x"],i=(e,n)=>{const t=e[n];if(t)return t;const i=o.indexOf(n);if(i>=0)for(let r=i+1;r<o.length;r+=1){const n=e[o[r]];if(n)return n}return e["236x"]}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/DesktopUnauthPageWrapper-d63373cded02df7b.mjs.map